import{r as c,a as S}from"./index-l2PZgWEW.js";import{u as R,a as p}from"./index-C_YkFgLh.js";import{r as g}from"./index-6lph7OXq.js";import{u as O}from"./cn-JZv3sLID.js";function D(e,n,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e==null||e(o),r===!1||!o.defaultPrevented)return n==null?void 0:n(o)}}function W({prop:e,defaultProp:n,onChange:r=()=>{}}){const[t,o]=P({defaultProp:n,onChange:r}),a=e!==void 0,d=a?e:t,f=R(r),i=c.useCallback(s=>{if(a){const u=typeof s=="function"?s(e):s;u!==e&&f(u)}else o(s)},[a,e,o,f]);return[d,i]}function P({defaultProp:e,onChange:n}){const r=c.useState(e),[t]=r,o=c.useRef(t),a=R(n);return c.useEffect(()=>{o.current!==t&&(a(t),o.current=t)},[t,o,a]),r}function h(e,n){return c.useReducer((r,t)=>n[r][t]??r,e)}var I=e=>{const{present:n,children:r}=e,t=M(n),o=typeof r=="function"?r({present:t.isPresent}):c.Children.only(r),a=O(t.ref,v(o));return typeof r=="function"||t.isPresent?c.cloneElement(o,{ref:a}):null};I.displayName="Presence";function M(e){const[n,r]=c.useState(),t=c.useRef({}),o=c.useRef(e),a=c.useRef("none"),d=e?"mounted":"unmounted",[f,i]=h(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return c.useEffect(()=>{const s=N(t.current);a.current=f==="mounted"?s:"none"},[f]),p(()=>{const s=t.current,m=o.current;if(m!==e){const A=a.current,l=N(s);e?i("MOUNT"):l==="none"||(s==null?void 0:s.display)==="none"?i("UNMOUNT"):i(m&&A!==l?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,i]),p(()=>{if(n){const s=u=>{const l=N(t.current).includes(u.animationName);u.target===n&&l&&g.flushSync(()=>i("ANIMATION_END"))},m=u=>{u.target===n&&(a.current=N(t.current))};return n.addEventListener("animationstart",m),n.addEventListener("animationcancel",s),n.addEventListener("animationend",s),()=>{n.removeEventListener("animationstart",m),n.removeEventListener("animationcancel",s),n.removeEventListener("animationend",s)}}else i("ANIMATION_END")},[n,i]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:c.useCallback(s=>{s&&(t.current=getComputedStyle(s)),r(s)},[])}}function N(e){return(e==null?void 0:e.animationName)||"none"}function v(e){var t,o;let n=(t=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:t.get,r=n&&"isReactWarning"in n&&n.isReactWarning;return r?e.ref:(n=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,r=n&&"isReactWarning"in n&&n.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var T=S.useId||(()=>{}),U=0;function _(e){const[n,r]=c.useState(T());return p(()=>{r(t=>t??String(U++))},[e]),n?`radix-${n}`:""}export{I as P,_ as a,D as c,W as u};
